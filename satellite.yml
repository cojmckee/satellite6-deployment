---

- name: setup server to be satellite or a capsule
  hosts:
    - satellite
    - capsule
  tags: [ setup ]
  roles:
    - setup-for-satellite

- name: install satellite
  hosts:
    - satellite
  tags: [ install ]
  roles:
    - install-satellite

- name: tune satellite
  hosts:
    - satellite
  tags: [ tune ]
  roles:
    - tune-satellite

- name: configure satellite
  hosts:
    - satellite
  collections:
    - theforeman.foreman
  roles:
    - satellite

- name: install capsule(s)
  hosts:
    - capsule
  tags: [ capsule ]
  roles:
    - install-capsule